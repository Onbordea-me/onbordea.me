<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Onbordea.me - Employees</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Add Google Fonts link for IBM Plex Sans -->
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'IBM Plex Sans', 'Inter', Arial, sans-serif;
      }
    </style>
  </head>
  <body class="bg-gray-50">
    <!-- Main Layout -->
    <div class="flex h-screen">
      <!-- Sidebar -->
      <aside id="sidebar" class="w-20 bg-gray-900 text-white flex flex-col items-center py-4 space-y-6 transition-all duration-300">
        <a href="index.html" >
          <img src="../../assets/logo.png" alt="Logo" />
        </a>
        <nav id="sidebar-nav" class="flex flex-col items-center space-y-6 mt-4 w-full">
          <a href="employees.html" class="flex items-center space-x-2 py-1 rounded hover:bg-gray-800 transition">
            <span>üë•</span>
            <span class="sidebar-label hidden">Employees</span>
          </a>
          <a href="equipment.html" class="flex items-center space-x-2 py-1 rounded hover:bg-gray-800 transition">
            <span>üì¶</span>
            <span class="sidebar-label hidden">Equipment</span>
          </a>
          <a href="requests.html" class="flex items-center space-x-2 py-1 rounded hover:bg-gray-800 transition">
            <span>üì¨</span>
            <span class="sidebar-label hidden">Requests</span>
          </a>
          <a href="analytics.html" class="flex items-center space-x-2 py-1 rounded hover:bg-gray-800 transition">
            <span>üìä</span>
            <span class="sidebar-label hidden">Analytics</span>
          </a>
          <a href="reports.html" class="flex items-center space-x-2 py-1 rounded hover:bg-gray-800 transition">
            <span>üóÇÔ∏è</span>
            <span class="sidebar-label hidden">Reports</span>
          </a>
          <a href="settings.html" class="flex items-center space-x-2 py-1 rounded hover:bg-gray-800 transition">
            <span>üõ∞Ô∏è</span>
            <span class="sidebar-label hidden">Settings</span>
          </a>
          <a href="support.html" class="flex items-center space-x-2 py-1 rounded hover:bg-gray-800 transition">
            <span>üåê</span>
            <span class="sidebar-label hidden">Support</span>
          </a>
        </nav>
      </aside>

      <!-- Main Content -->
      <div class="flex-1 flex flex-col">
        <!-- Top Navbar -->
        <header class="flex items-center justify-between px-6 py-4 bg-white shadow">
          <div class="flex items-center space-x-4">
            <button id="sidebar-toggle" class="text-gray-600 text-xl">‚ò∞</button>
            <input
              type="text"
              placeholder="Search employees..."
              class="px-3 py-1 border rounded-md text-sm focus:outline-none"
            />
            <button class="bg-indigo-500 text-white px-4 py-1 rounded text-sm">Search</button>
          </div>
          <div class="flex items-center space-x-4">
            <span>üîî</span>
            <span class="flex items-center space-x-2">
               <!--
            <img src="https://via.placeholder.com/30" class="rounded-full" />
          -->
              <span class="text-sm">Dominic Keller</span>
            </span>
          </div>
        </header>

        <!-- Employee Management Section -->
        <main class="flex-1 p-6 overflow-y-auto">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-semibold text-gray-800">Employees Management</h2>
            <!-- Button in your main content -->
<button id="openModalBtn" class="bg-indigo-500 text-white px-4 py-2 rounded hover:bg-indigo-600 text-sm">
  Register New Employee
</button>
          </div>

          <!-- Employee Cards -->
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <!-- Employee Card 1 -->
            <div class="bg-white rounded-lg shadow p-4">
              <div class="flex items-center space-x-4 mb-2">
                <div class="bg-gray-200 rounded-full h-10 w-10 flex items-center justify-center text-gray-700 font-semibold">
                  AB
                </div>
                <div>
                  <h3 class="font-semibold text-gray-800">Alice Brown</h3>
                  <p class="text-sm text-gray-600">
                    <a href="mailto:alice.brown@example.com">alice.brown@example.com</a>
                  </p>
                  
                </div>
              </div>
              <p class="text-sm text-gray-700"><strong>Position:</strong> Software Engineer</p>
              <p class="text-sm text-gray-700"><strong>Location:</strong> Remote</p>
              <p class="text-sm text-gray-700 mt-2"><strong>Assigned Equipment:</strong></p>
              <ul class="text-sm text-gray-600 list-disc list-inside">
                <li>PC</li>
                <li>Software License</li>
              </ul>
              <button class="bg-red-500 text-white mt-4 px-3 py-1 rounded hover:bg-red-600 text-sm">
                Deregister Employee
              </button>
            </div>

            <!-- Employee Card 2 -->
            <div class="bg-white rounded-lg shadow p-4">
              <div class="flex items-center space-x-4 mb-2">
                <div class="bg-gray-200 rounded-full h-10 w-10 flex items-center justify-center text-gray-700 font-semibold">
                  JB
                </div>
                <div>
                  <h3 class="font-semibold text-gray-800">John Baker</h3>
                  <p class="text-sm text-gray-600">
                    <a href="mailto:john.baker@example.com">john.baker@example.com</a>
                  </p>
                </div>
              </div>
              <p class="text-sm text-gray-700"><strong>Position:</strong> HR Manager</p>
              <p class="text-sm text-gray-700"><strong>Location:</strong> Office</p>
              <p class="text-sm text-gray-700 mt-2"><strong>Assigned Equipment:</strong></p>
              <ul class="text-sm text-gray-600 list-disc list-inside">
                <li>Desk</li>
                <li>Phone</li>
              </ul>
              <button class="bg-red-500 text-white mt-4 px-3 py-1 rounded hover:bg-red-600 text-sm">
                Deregister Employee
              </button>
            </div>

            <!-- Employee Card 3 -->
            <div class="bg-white rounded-lg shadow p-4">
              <div class="flex items-center space-x-4 mb-2">
                <div class="bg-gray-200 rounded-full h-10 w-10 flex items-center justify-center text-gray-700 font-semibold">
                  CT
                </div>
                <div>
                  <h3 class="font-semibold text-gray-800">Catherine Taylor</h3>
                  <p class="text-sm text-gray-600">
                    <a href="mailto:catherine.taylor@example.com">catherine.taylor@example.com</a>
                  </p>
                </div>
              </div>
              <p class="text-sm text-gray-700"><strong>Position:</strong> Marketing Lead</p>
              <p class="text-sm text-gray-700"><strong>Location:</strong> Hybrid</p>
              <p class="text-sm text-gray-700 mt-2"><strong>Assigned Equipment:</strong></p>
              <ul class="text-sm text-gray-600 list-disc list-inside">
                <li>Laptop</li>
                <li>Mouse</li>
              </ul>
              <button class="bg-red-500 text-white mt-4 px-3 py-1 rounded hover:bg-red-600 text-sm">
                Deregister Employee
              </button>
            </div>
          </div>
        </main>
      </div>
    </div>

    <!-- Add Employee Modal -->
    <div id="addEmployeeModal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden">
      <div class="bg-white rounded-lg p-6 w-full max-w-md">
        <h2 class="text-lg font-semibold mb-4">Register New Employee</h2>
        <form id="addEmployeeForm" class="space-y-3">
          <input name="name" type="text" placeholder="Full Name" required class="w-full border rounded px-3 py-2" />
          <input name="email" type="email" placeholder="Email" required class="w-full border rounded px-3 py-2" />
          <input name="position" type="text" placeholder="Position" required class="w-full border rounded px-3 py-2" />
          <input name="location" type="text" placeholder="Location" required class="w-full border rounded px-3 py-2" />
          <input name="equipment" type="text" placeholder="Assigned Equipment (comma separated)" class="w-full border rounded px-3 py-2" />
          <div class="flex justify-end space-x-2">
            <button type="button" id="closeModalBtn" class="px-4 py-1 rounded bg-gray-300 hover:bg-gray-400">Cancel</button>
            <button type="submit" class="px-4 py-1 rounded bg-indigo-500 text-white hover:bg-indigo-600">Add</button>
          </div>
        </form>
      </div>
    </div>

    <script src="../backend/sidebar.js"></script>
    <script>
  // Modal logic
  const modal = document.getElementById('addEmployeeModal');
  const openModalBtn = document.getElementById('openModalBtn'); // <-- Use ID here!
  const closeModalBtn = document.getElementById('closeModalBtn');
  const addEmployeeForm = document.getElementById('addEmployeeForm');

  openModalBtn.addEventListener('click', () => modal.classList.remove('hidden'));
  closeModalBtn.addEventListener('click', () => modal.classList.add('hidden'));

  // Form submission logic
  addEmployeeForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(addEmployeeForm);
    const data = {
      name: formData.get('name'),
      email: formData.get('email'),
      position: formData.get('position'),
      location: formData.get('location'),
      equipment: formData.get('equipment').split(',').map(item => item.trim()).filter(Boolean)
    };

    try {
      const res = await fetch('/api/employees', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
      if (res.ok) {
        const newEmployee = await res.json();
        addEmployeeCard(newEmployee);
        modal.classList.add('hidden');
        addEmployeeForm.reset();
        alert('Employee added!');
      } else {
        const err = await res.json();
        alert('Error: ' + (err.error || 'Could not add employee'));
      }
    } catch (err) {
      alert('Error: ' + err.message);
    }
  });

  function addEmployeeCard(employee) {
  const grid = document.querySelector('.grid');
  const initials = employee.name.split(' ').map(n => n[0]).join('').toUpperCase().slice(0,2);
  const equipmentList = (employee.equipment || []).map(eq => `<li>${eq}</li>`).join('');
  const card = document.createElement('div');
  card.className = "bg-white rounded-lg shadow p-4";
  card.innerHTML = `
    <div class="flex items-center space-x-4 mb-2">
      <div class="bg-gray-200 rounded-full h-10 w-10 flex items-center justify-center text-gray-700 font-semibold">
        ${initials}
      </div>
      <div>
        <h3 class="font-semibold text-gray-800">${employee.name}</h3>
        <p class="text-sm text-gray-600">
          <a href="mailto:${employee.email}">${employee.email}</a>
        </p>
      </div>
    </div>
    <p class="text-sm text-gray-700"><strong>Position:</strong> ${employee.position}</p>
    <p class="text-sm text-gray-700"><strong>Location:</strong> ${employee.location}</p>
    <p class="text-sm text-gray-700 mt-2"><strong>Assigned Equipment:</strong></p>
    <ul class="text-sm text-gray-600 list-disc list-inside">
      ${equipmentList}
    </ul>
    <button class="bg-red-500 text-white mt-4 px-3 py-1 rounded hover:bg-red-600 text-sm">
      Deregister Employee
    </button>
  `;
  grid.appendChild(card);
}
    </script>
  </body>
</html>
